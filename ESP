local Players = game:GetService("Players")

local function removeHighlights(player)
    local character = player.Character
    if character then
        for _, child in pairs(character:GetChildren()) do
            if child:IsA("Highlight") then
                child:Destroy()
            end
        end
    end
end

local function addHighlight(player)
    local character = player.Character or player.CharacterAdded:Wait()
    local highlight = Instance.new("Highlight")
    highlight.Parent = character
end

local function refreshHighlights()
    for _, player in ipairs(Players:GetPlayers()) do
        removeHighlights(player)
        addHighlight(player)
        print("Highlighted player: " .. player.Name)
    end
end

-- Refresh highlights for all players once at the start
refreshHighlights()

-- Also handle players that join after the script runs
Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        removeHighlights(player)
        addHighlight(player)
        print("Highlighted new player: " .. player.Name)
    end)
end)
